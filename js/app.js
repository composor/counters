!function(){"use strict";function e(e,t){for(var n=[],r=void 0,o=[],i=arguments.length,s=Array(i>2?i-2:0),u=2;u<i;u++)s[u-2]=arguments[u];for(n=n.concat(s.reverse());n.length;)Array.isArray(r=n.pop())?r.map(function(e){return n.unshift(e)}):null!=r&&!0!==r&&!1!==r&&("number"==typeof r&&(r+=""),o.push(r));return"string"==typeof e?{type:e,props:t||{},children:o}:e(t||{},o)}function t(e,t){var n={};for(var r in e)n[r]=e[r];for(var o in t)n[o]=t[o];return n}function n(e,n,r,o){if("key"===n);else if("style"===n)for(var i in t(o,r=r||{}))e.style[i]=String(r[i])||"";else{try{e[n]=r}catch(e){}"function"!=typeof r&&(r?"xlink-href"===n?e.setAttributeNS("http://www.w3.org/1999/xlink","href",r):e.setAttribute(n,r):e.removeAttribute(n))}}function r(e,t){return"string"==typeof e?document.createTextNode(e):function(e,t){var o=(t=t||"svg"===e.type)?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type);return Object.keys(e.props).forEach(function(t){return n(o,t,e.props[t])}),e.children.map(function(e){return o.appendChild(r(e,t))}),o}(e,t)}function o(e){if(e&&e.props)return e.props.key}function i(e,s,a,c,l,h){if(null==a)s=e.insertBefore(r(c,l),s);else if(null!=c.type&&c.type===a.type){!function(e,r,o){Object.keys(t(r,o)).forEach(function(t){var i=o[t],s="value"===t||"checked"===t?e[t]:r[t];i!==s&&n(e,t,i,s)})}(s,a.props,c.props),l=l||"svg"===c.type;for(var f=c.children.length,d=a.children.length,p={},m=[],y={},v=0;v<d;){var b=m[v]=s.childNodes[v],w=a.children[v],k=o(w);null!=k&&(p[k]=[b,w]),v++}for(var g=0,S=0;S<f;){var C=m[g],O=a.children[g],U=c.children[S],W=o(O);if(y[W])g++;else{var j=o(U),E=p[j]||[];null==j?(null==W&&(i(s,C,O,U,l),S++),g++):(W===j?i(s,E[0],E[1],U,l)&&g++:E[0]?s.insertBefore(E[0],C)&&i(s,E[0],E[1],U,l):i(s,C,null,U,l),y[j]=U,S++)}}for(;g<d;){null==o(a.children[g])&&u(s,m[g]),g++}Object.keys(p).forEach(function(e){var t=p[e],n=t[1];y[n.props.key]||u(s,t[0])})}else s&&c!==s.nodeValue&&("string"==typeof c&&"string"==typeof a?s.nodeValue=c:(s=e.insertBefore(r(c,l),h=s),u(e,h,a.data)));return s}function s(){return Math.floor(1e7*Math.random()+1e3*Math.random())}var u=function(e,t){return e.removeChild(t)},a=function(e,t){Object.keys(t).forEach(function(n){t.hasOwnProperty(n)&&Object.defineProperty(e,n,{value:t[n],writable:!0,enumerable:!1,configurable:!0})})},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=(function(){function e(e){this.value=e}function t(t){function n(o,i){try{var s=t[o](i),u=s.value;u instanceof e?Promise.resolve(u.value).then(function(e){n("next",e)},function(e){n("throw",e)}):r(s.done?"return":"normal",s.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?n(o.key,o.arg):i=null}var o,i;this._invoke=function(e,t){return new Promise(function(r,s){var u={key:e,arg:t,resolve:r,reject:s,next:null};i?i=i.next=u:(o=i=u,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)},p=(new Date).getTime(),m=function(){function e(t){l(this,e),t||(t={}),this.selector=t.container||t.root||"body",t.render&&(this.render=t.render),t.state&&(this.state=t.state),this.oldNode=null,this.selector&&(this.container=document.querySelector(this.selector)),this.componentShouldUpdate=!0,this.mounted=!1,this.element,t.beforeCreateComponent&&(this.beforeCreateComponent=t.beforeCreateComponent),t.componentWasCreated&&(this.componentWasCreated=t.componentWasCreated),t.componentWillUpdate&&(this.componentWillUpdate=t.componentWillUpdate),t.componentDidUpdate&&(this.componentDidUpdate=t.componentDidUpdate),t.componentWillUnmount&&(this.componentWillUnmount=t.componentWillUnmount)}return h(e,[{key:"setState",value:function(e,t){if("function"==typeof e){var n=e.call(this,this.state);"function"!=typeof n&&n&&this.setState(n)}if(Array.isArray(this.state)){var r=this.state;t||0===t?"object"===c(r[t])?(a(r[t],e),this.state=r):(r[t]=e,this.state=r):this.state=r}else if("object"===c(this.state)){var o=this.state;a(o,e),this.state=o}else this.state=e}},{key:"update",value:function(e){function t(e){try{return JSON.stringify(this.oldNode)!==JSON.stringify(r(e))}catch(e){return!0}}if(this.render){var n=this.state;!0===e||0!==e&&!e||(n=e),this.container&&"string"==typeof this.container&&(this.selector=this.container,this.container=document.querySelector(this.container));var r=this.render,o=this.render(n),s=void 0;if(o&&o.props&&o.props.id)try{s=this.container.querySelector("#"+o.props.id)}catch(e){}if(s&&!this.mounted&&s.parentNode.removeChild(s),this.element=function(e,t,n,r){return i(r||document.body,n,e,t)}(this.oldNode,this.oldNode=this.render(n),this.element,this.container),!(this.mounted&&this.oldNode&&t(n)))return this.beforeCreateComponent&&this.beforeCreateComponent(this),this.componentWasCreated&&this.componentWasCreated(this),void(this.mounted=!0);this.componentWillUpdate&&this.componentWillUpdate(this),this.componentDidUpdate&&t(n)&&this.componentDidUpdate(this)}}},{key:"unmount",value:function(){this.componentWillUnmount&&this.componentWillUnmount(this),this.container.removeChild(this.element),this.container=void 0;for(var e in this)delete this[e];delete this.state,this.update=void 0,this.unmount=void 0}},{key:"state",set:function(e){var t=this;this[p]=e,d(function(){return t.update()})},get:function(){return this[p]}}]),e}();window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t=(this.document||this.ownerDocument).querySelectorAll(e),n=void 0,r=this;do{for(n=t.length;--n>=0&&t.item(n)!==r;);}while(n<0&&(r=r.parentElement));return r});var y=new m({container:"header",render:function(t){return e("nav",null,e("h1",null,t))}}),v=new m({container:"section",state:0,render:function(t){return e("p",{id:"sum"},e("span",null,"The sum of all counters is: "),e("strong",null,t))}}),b=[],w=function(t){function n(e){return l(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,m),h(n,[{key:"render",value:function(t){var n=this,r=t.disabled,o=t.number;return e("div",{class:"counter",id:s()},e("button",{disabled:r,onclick:this.decrease.bind(this),id:"decrease"},"-"),e("span",null,o),e("button",{onclick:function(){return n.increase()},id:"increase"},"+"),e("button",{onclick:function(){return n.delete()}},"Delete"))}},{key:"increase",value:function(){this.setState({disabled:!1,number:this.state.number+1}),v.state=b.reduce(function(e,t){return e+t.state.number},0)}},{key:"decrease",value:function(){this.state.number<2?(this.setState({disabled:!0,number:this.state.number-1}),v.state=b.reduce(function(e,t){return e+t.state.number},0)):(this.setState({disabled:!1,number:this.state.number-1}),v.state=b.reduce(function(e,t){return e+t.state.number},0))}},{key:"delete",value:function(){var e=this.state.id,t=b.filter(function(t){return e==t.state.id})[0],n=b.indexOf(t);b.splice(n,1),t.unmount(),v.state=b.reduce(function(e,t){return e+t.state.number},0)}},{key:"sum",value:function(e){this.state=this.state.number+e}}]),n}();y.state="Composi - Counters";var k=function(){var e=new w({element:"#counter",state:{disabled:!1,number:1,id:s()},componentDidRender:function(t){console.log("Just rendered the counter. It's new value is: "+e.state.number+".")},componentWillUnmount:function(){console.log("Just deleted the counter.")}});e.update(),b.push(e),v.state=b.reduce(function(e,t){return e+t.state.number},0)};k(),document.querySelector("#addCounter").addEventListener("click",k)}();
//# sourceMappingURL=app.js.map
